(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B;$.Define($$,{YC:{GraphParsingDemo:{Client:{FileControl:$.Field(function(){var C,Q;C=function(){var E,F,G,H,N,O;E=b.New();F=c.ofArray([f.Attr().NewAttr("type","file"),f.Attr().NewAttr("accept","text/*")]);G=g.Tags().NewTag("input",F);H=function(I){return function(){var K,L;K=I.Dom.files.item(0);L=new h();L.readAsText(K);return L.addEventListener("load",function(){return E.event.Trigger($.New(l,{$:0,$0:L.result}));},true);};};m.Events().OnChange(H,G);N=G;O=function(){N.set_Value("");return E.event.Trigger($.New(l,{$:0,$0:""}));};return[N,O,E.event];};Q=o.BuildFormlet(C);return o.InitWith("",Q);}),InputControl:function(R,S){var T,U,_9,_;T=o.Do();U=T.Delay(function(){var W,X;W=o.Do();X=W.Delay(function(){return W.Bind(r.FileControl(),function(Z){return W.Return(Z);});});return T.Bind(s.WithFormContainer(X),function(_0){var _1,_2,_3,_4,_5,_6,_7;_1=_0===""?S:_0;_2=t.TextArea(_1);_3=s.WithTextLabel(R,_2);_4=s.WithLabelAbove(_3);_5=r.getFormSize(90,540);_6=_5[0];_7=_5[1];return T.Bind(r.setFormSize(_6,_7,"textarea",_4),function(_8){return T.Return(_8);});});});_9=o.FlipBody(U);_=o.Vertical(_9);return s.WithFormContainer(_);},Main:function(){var ba;ba=c.ofArray([r.MegaGigaForm().Run(function(){return null;})]);return g.Tags().NewTag("div",ba);},MegaGigaForm:$.Field(function(){var bb,bc,bj,bk,bl,bs,bt,bw,bx,by,bz,bA,bB,cc,cd;bb=o.Do();bc=bb.Delay(function(){return bb.Bind(r.InputControl("Graph",""),function(be){var bf,bg,bh;bf=t.Checkbox(false);bg=s.WithTextLabel("Show formal subgraph",bf);bh=s.WithLabelLeft(bg);return bb.Bind(s.WithFormContainer(bh),function(bi){return bb.Return([be,bi]);});});});bj=o.Vertical(bc);bk=o.Do();bl=bk.Delay(function(){return bk.Bind(r.InputControl("Grammar",""),function(bn){var bo,bp,bq;bo=t.Checkbox(false);bp=s.WithTextLabel("Remove redundant nodes",bo);bq=s.WithLabelLeft(bp);return bk.Bind(s.WithFormContainer(bq),function(br){return bk.Return([bn,br]);});});});bs=o.Vertical(bl);bt=u.$(u.$(o.Return(function(bu){return function(bv){return[bu,bv];};}),bs),bj);bw=o.Horizontal(bt);bx=v.get_Default();by=$.New(v,{Label:{$:1,$0:"Show me love"},Style:{$:1,$0:r.style()},Class:bx.Class});bz=s.WithCustomSubmitButton(by,bw);bA=o.Vertical(bz);bB=function(bC){var bD,bE,bF,bG,bH,bI,bJ,bK,bV,bW,bX,bY,b1,b2,b5,b6,b7,b8,b9,b_;bD=bC[0];bE=bC[1];bF=bD[0];bG=bD[1];bH=bE[0];bI=bE[1];bJ=o.Do();bK=bJ.Delay(function(){var bM,bN,bO,bR,bS;bM=x.Sync("YC.GraphParsingDemo:1",[bH,bF,bG,bI]);if(bM.$==4){bO=bM.$0;bN=bJ.Bind(r.ShowGraphImageControl("Graph Visualization",{$:0},bO),function(bP){return bJ.Bind(r.ShowSPPFImageControl("SPPF",{$:0},bO),function(bQ){return bJ.Return([bP,bQ]);});});}else{if(bM.$==1){bR=bM.$0;bS=bM.$1;bN=bJ.Bind(r.ShowGraphImageControl("Graph Visualization",{$:1,$0:bS},""),function(bT){return bJ.Bind(r.ShowSPPFImageControl("SPPF",{$:1,$0:bR},""),function(bU){r.globalTree=function(){return bR;};r.globalGraph=function(){return bS;};return bJ.Return([bT,bU]);});});}else{bN=y.Raise(z.New("C:\\MyProjects\\github\\gpdg\\src\\YC.GraphParsingDemo\\Client.fs",154,30));}}return bN;});bV=o.Horizontal(bK);bW=s.WithFormContainer(bV);bX=o.Do();bY=bX.Delay(function(){return bX.Bind(bW,function(b0){return bX.Return(b0);});});b1=o.Do();b2=b1.Delay(function(){return b1.Bind(r.RangeControl(),function(b4){return b1.Return(b4);});});b5=v.get_Default();b6=$.New(v,{Label:{$:1,$0:"\u0418\u0437\u0432\u043b\u0435\u0447\u044c \u0447\u043e\u0442\u043e"},Style:{$:1,$0:r.style()},Class:b5.Class});b7=s.WithCustomSubmitButton(b6,b2);b8=o.Horizontal(b7);b9=o.Do();b_=b9.Delay(function(){return b9.Bind(bY,function(ca){return b9.Bind(b8,function(cb){return b9.Return([ca,cb]);});});});return o.Vertical(b_);};cc=o.Do();cd=cc.Delay(function(){return cc.Bind(bA,function(cf){return cc.Bind(bB(cf),function(cg){return cc.Return([cf,cg]);});});});return o.Vertical(cd);}),RangeControl:$.Field(function(){var ch,ck,cs,cA,cB,cC;ck=o.Do();cs=o.Do();ch=u.$(u.$(o.Return(function(ci){return function(cj){return[ci<<0,cj<<0];};}),ck.Delay(function(){var cm,cn,co,cp,cq;cm=t.Input("");cn=s.WithTextLabel("Initial",cm);co=r.getFormSize(20,50);cp=co[0];cq=co[1];return ck.Bind(r.setFormSize(cp,cq,"input",cn),function(cr){return ck.Return(cr);});})),cs.Delay(function(){var cu,cv,cw,cx,cy;cu=t.Input("");cv=s.WithTextLabel("Final",cu);cw=r.getFormSize(20,50);cx=cw[0];cy=cw[1];return cs.Bind(r.setFormSize(cx,cy,"input",cv),function(cz){return cs.Return(cz);});}));cA=o.Horizontal(ch);cB=s.WithTextLabel("Vertices",cA);cC=s.WithLabelAbove(cB);return s.WithFormContainer(cC);}),ShowGraphImageControl:function(cD,cE){var cG,cM,cN;cG=o.OfElement(function(){var cI,cJ,cK,cL;cI="height: "+(r.getFormSize(90,540))[0]+"; width: "+(r.getFormSize(120,540))[1];if(cE.$==1){cE.$0;cK=c.ofArray([f.Attr().NewAttr("style",cI),f.Attr().NewAttr("src","yeahboy.png")]);cJ=g.Tags().NewTag("img",cK);}else{cL=c.ofArray([f.Attr().NewAttr("style",cI),f.Attr().NewAttr("src","yeahboy.png")]);cJ=g.Tags().NewTag("img",cL);}return cJ;});cM=s.WithTextLabel(cD,cG);cN=s.WithLabelAbove(cM);return s.WithFormContainer(cN);},ShowSPPFImageControl:function(cO,cP){var cR,cY,cZ;cR=o.OfElement(function(){var cT,cU,cV,cW,cX;cT="height: "+(r.getFormSize(90,540))[0]+"; width: "+(r.getFormSize(120,540))[1];if(cP.$==1){cV=cP.$0;x.Sync("YC.GraphParsingDemo:3",[cV]);cW=c.ofArray([f.Attr().NewAttr("style",cT),f.Attr().NewAttr("src","yeahboy.png")]);cU=g.Tags().NewTag("img",cW);}else{cX=c.ofArray([f.Attr().NewAttr("style",cT),f.Attr().NewAttr("src","yeahboy.png")]);cU=g.Tags().NewTag("img",cX);}return cU;});cY=s.WithTextLabel(cO,cR);cZ=s.WithLabelAbove(cY);return s.WithFormContainer(cZ);},getFormSize:function(c0,c1){var c2,c3;c2=c0*r.screenHeight()/638>>0;c3=c1*r.screenWidth()/1366>>0;return[A(c2)+"px",A(c3)+"px"];},globalGraph:$.Field(function(){return null;}),globalTree:$.Field(function(){return null;}),screenHeight:$.Field(function(){return B("html").height();}),screenWidth:$.Field(function(){return B("html").width();}),setFormSize:function(c4,c5,c6,c7){var c8;c8=function(c9){B(c9.Dom.querySelector(c6)).css("height",c4).css("width",c5);return c9;};return o.MapElement(c8,c7);},style:$.Field(function(){return"padding-top: 0px; background-color: #FF69B4; border-width: 0px; border-color: #000000; border-radius: 10px; color: #000000; height: "+(r.getFormSize(40,150))[0]+"; width: "+(r.getFormSize(40,150))[1]+"; font-size:"+(r.getFormSize(15,15))[0];})}}}});$.OnInit(function(){a=$.Safe($$.WebSharper.Control);b=$.Safe(a.FSharpEvent);c=$.Safe($$.WebSharper.List);d=$.Safe($$.WebSharper.Html);e=$.Safe(d.Client);f=$.Safe(e.Attr);g=$.Safe(e.Tags);h=$.Safe($$.FileReader);i=$.Safe($$.IntelliFactory);j=$.Safe(i.Formlets);k=$.Safe(j.Base);l=$.Safe(k.Result);m=$.Safe(e.EventsPervasives);n=$.Safe($$.WebSharper.Formlets);o=$.Safe(n.Formlet);p=$.Safe($$.YC);q=$.Safe(p.GraphParsingDemo);r=$.Safe(q.Client);s=$.Safe(n.Enhance);t=$.Safe(n.Controls);u=$.Safe(n.Data);v=$.Safe(s.FormButtonConfiguration);w=$.Safe($$.WebSharper.Remoting);x=$.Safe(w.AjaxRemotingProvider);y=$.Safe($$.WebSharper.Operators);z=$.Safe($$.WebSharper.MatchFailureException);A=$.Safe($$.String);return B=$.Safe($$.jQuery);});$.OnLoad(function(){r.style();r.screenWidth();r.screenHeight();r.globalTree();r.globalGraph();r.RangeControl();r.MegaGigaForm();r.FileControl();return;});}());
