(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C;$.Define($$,{YC:{GraphParsingDemo:{Client:{ErrorControl:function(D,E){var F,G;F=b.Do();G=F.Delay(function(){var I,L,M,N,O,P;I=b.OfElement(function(){var K;K=c.ofArray([f.Attr().NewAttr("readonly","readonly"),g.Tags().text(D)]);return g.Tags().NewTag("textarea",K);});L=h.WithTextLabel(E,I);M=h.WithLabelAbove(L);N=k.getFormSize(90,540);O=N[0];P=N[1];return F.Bind(k.setFormSize(O,P,"textarea",M),function(Q){return F.Return(Q);});});return h.WithFormContainer(G);},FileControl:$.Field(function(){var R,_5;R=function(){var T,U,V,W,_2,_3;T=m.New();U=c.ofArray([f.Attr().NewAttr("type","file"),f.Attr().NewAttr("accept","text/*")]);V=g.Tags().NewTag("input",U);W=function(X){return function(){var Z,_0;Z=X.Dom.files.item(0);_0=new n();_0.readAsText(Z);return _0.addEventListener("load",function(){return T.event.Trigger($.New(r,{$:0,$0:_0.result}));},true);};};s.Events().OnChange(W,V);_2=V;_3=function(){_2.set_Value("");return T.event.Trigger($.New(r,{$:0,$0:""}));};return[_2,_3,T.event];};_5=b.BuildFormlet(R);return b.InitWith("",_5);}),InputControl:function(_6,_7){var _8,_9,bm,bn;_8=b.Do();_9=_8.Delay(function(){var ba,bb;ba=b.Do();bb=ba.Delay(function(){return ba.Bind(k.FileControl(),function(bd){return ba.Return(bd);});});return _8.Bind(h.WithFormContainer(bb),function(bd){var be,bf,bg,bh,bi,bj,bk;be=bd===""?_7:bd;bf=t.TextArea(be);bg=h.WithTextLabel(_6,bf);bh=h.WithLabelAbove(bg);bi=k.getFormSize(90,540);bj=bi[0];bk=bi[1];return _8.Bind(k.setFormSize(bj,bk,"textarea",bh),function(bl){return _8.Return(bl);});});});bm=b.FlipBody(_9);bn=b.Vertical(bm);return h.WithFormContainer(bn);},Main:function(){var bo;bo=c.ofArray([k.MegaGigaForm().Run(function(){return null;})]);return g.Tags().NewTag("div",bo);},MegaGigaForm:$.Field(function(){var bq,br,by,bz,bA,bH,bI,bL,bM,bN,bO,bP,bQ,cS,cT;bq=b.Do();br=bq.Delay(function(){return bq.Bind(k.InputControl("Graph",v.Sync("YC.GraphParsingDemo:0",[{$:0}])),function(bt){var bu,bv,bw;bu=t.Checkbox(false);bv=h.WithTextLabel("Show formal subgraph",bu);bw=h.WithLabelLeft(bv);return bq.Bind(h.WithFormContainer(bw),function(bx){return bq.Return([bt,bx]);});});});by=b.Vertical(br);bz=b.Do();bA=bz.Delay(function(){return bz.Bind(k.InputControl("Grammar",v.Sync("YC.GraphParsingDemo:0",[{$:1}])),function(bC){var bD,bE,bF;bD=t.Checkbox(false);bE=h.WithTextLabel("Remove redundant nodes",bD);bF=h.WithLabelLeft(bE);return bz.Bind(h.WithFormContainer(bF),function(bG){return bz.Return([bC,bG]);});});});bH=b.Vertical(bA);bI=w.$(w.$(b.Return(function(bJ){return function(bK){return[bJ,bK];};}),bH),by);bL=b.Horizontal(bI);bM=x.get_Default();bN=$.New(x,{Label:{$:1,$0:"SHOW GRAPH"},Style:{$:1,$0:k.style()},Class:bM.Class});bO=h.WithCustomSubmitButton(bN,bL);bP=b.Vertical(bO);bQ=function(bR){var bS,bT,bU,bV,bW,bX,bY,bZ,b_,b$,ca,cb,ce,cf,ci,cj,ck,cl,cm,cn,cr,cs,cN,cO;bS=bR[0];bT=bR[1];bU=bS[0];bV=bS[1];bW=bT[0];bX=bT[1];bY=b.Do();bZ=bY.Delay(function(){var b1,b2,b3,b6,b7;b1=v.Sync("YC.GraphParsingDemo:1",[bU,bW,bV,bX]);if(b1.$==4){b3=b1.$0;b2=bY.Bind(k.ErrorControl(b3,"Graph Visualization"),function(b4){return bY.Bind(k.ErrorControl(b3,"SPPF"),function(b5){return bY.Return([b4,b5]);});});}else{if(b1.$==1){b6=b1.$0;b7=b1.$1;b2=bY.Bind(k.ShowGraphImageControl("Graph Visualization",b7),function(b8){return bY.Bind(k.ShowSPPFImageControl("SPPF",b6),function(b9){k.globalTree=function(){return b6;};k.globalGraph=function(){return b7;};return bY.Return([b8,b9]);});});}else{b2=y.Raise(z.New("C:\\YC.GraphParsingDemo\\src\\YC.GraphParsingDemo\\Client.fs",171,34));}}return b2;});b_=b.Horizontal(bZ);b$=h.WithFormContainer(b_);ca=b.Do();cb=ca.Delay(function(){return ca.Bind(b$,function(cd){return ca.Return(cd);});});ce=b.Do();cf=ce.Delay(function(){return ce.Bind(k.RangeControl(),function(ch){return ce.Return(ch);});});ci=x.get_Default();cj=$.New(x,{Label:{$:1,$0:"FIND PATH"},Style:{$:1,$0:k.style()},Class:ci.Class});ck=h.WithCustomSubmitButton(cj,cf);cl=b.Horizontal(ck);cm=b.Do();cn=cm.Delay(function(){return cm.Bind(cb,function(cp){return cm.Bind(cl,function(cq){return cm.Return([cp,cq]);});});});cr=b.Vertical(cn);cs=function(ct){var cu,cv,cM;cu=b.Do();cv=cu.Delay(function(){var cx,cy,cz,cA,cB,cE,cF;if(ct[0]<ct[1]){if(!A.Equals(k.globalTree(),null)){cz=v.Sync("YC.GraphParsingDemo:2",[k.globalTree(),k.globalGraph(),ct[0],ct[1]]);if(cz.$==4){cB=cz.$0;cA=cu.Bind(k.ErrorControl(cB,"Path"),function(cC){return cu.Bind(k.ErrorControl(cB,"SPPF Path"),function(cD){return cu.Return([cC,cD]);});});}else{if(cz.$==2){cE=cz.$0;cF=cz.$1;cA=cu.Bind(k.ShowGraphImageControl("Path",cF),function(cG){return cu.Bind(k.ShowTreeImageControl("SPPF Path",cE),function(cH){return cu.Return([cG,cH]);});});}else{cA=y.Raise(z.New("C:\\YC.GraphParsingDemo\\src\\YC.GraphParsingDemo\\Client.fs",209,38));}}cy=cA;}else{cy=cu.Bind(k.ErrorControl("empty","Path"),function(cI){return cu.Bind(k.ErrorControl("empty","SPPF Path"),function(cJ){return cu.Return([cI,cJ]);});});}cx=cy;}else{cx=cu.Bind(k.ErrorControl("incorrect range","Path"),function(cK){return cu.Bind(k.ErrorControl("incorrect range","SPPF Path"),function(cL){return cu.Return([cK,cL]);});});}return cx;});cM=b.Horizontal(cv);return h.WithFormContainer(cM);};cN=b.Do();cO=cN.Delay(function(){return cN.Bind(cr,function(cQ){return cN.Bind(cs(cQ[1]),function(cR){return cN.Return([cQ,cR]);});});});return b.Vertical(cO);};cS=b.Do();cT=cS.Delay(function(){return cS.Bind(bP,function(cV){return cS.Bind(bQ(cV),function(cW){return cS.Return([cV,cW]);});});});return b.Vertical(cT);}),RangeControl:$.Field(function(){var cX,c0,c8,de,df,dg;c0=b.Do();c8=b.Do();cX=w.$(w.$(b.Return(function(cY){return function(cZ){return[cY<<0,cZ<<0];};}),c0.Delay(function(){var c2,c3,c4,c5,c6;c2=t.Input("");c3=h.WithTextLabel("Initial",c2);c4=k.getFormSize(20,50);c5=c4[0];c6=c4[1];return c0.Bind(k.setFormSize(c5,c6,"input",c3),function(c7){return c0.Return(c7);});})),c8.Delay(function(){var c_,c$,da,db,dc;c_=t.Input("");c$=h.WithTextLabel("Final",c_);da=k.getFormSize(20,50);db=da[0];dc=da[1];return c8.Bind(k.setFormSize(db,dc,"input",c$),function(dd){return c8.Return(dd);});}));de=b.Horizontal(cX);df=h.WithTextLabel("Vertices",de);dg=h.WithLabelAbove(df);return h.WithFormContainer(dg);}),ShowGraphImageControl:function(dh){var dj,dn,_do;dj=b.OfElement(function(){var dl,dm;dl="height: "+(k.getFormSize(90,540))[0]+"; width: "+(k.getFormSize(120,540))[1];dm=c.ofArray([f.Attr().NewAttr("style",dl),f.Attr().NewAttr("src","yeahboy.pnfg")]);return g.Tags().NewTag("img",dm);});dn=h.WithTextLabel(dh,dj);_do=h.WithLabelAbove(dn);return h.WithFormContainer(_do);},ShowSPPFImageControl:function(dp,dq){var dr,dv,dw;dr=b.OfElement(function(){var dt,du;dt="height: "+(k.getFormSize(90,540))[0]+"; width: "+(k.getFormSize(120,540))[1];v.Sync("YC.GraphParsingDemo:3",[dq]);du=c.ofArray([f.Attr().NewAttr("style",dt),f.Attr().NewAttr("src","yeahboy.png")]);return g.Tags().NewTag("img",du);});dv=h.WithTextLabel(dp,dr);dw=h.WithLabelAbove(dv);return h.WithFormContainer(dw);},ShowTreeImageControl:function(dx){var dz,dD,dE;dz=b.OfElement(function(){var dB,dC;dB="height: "+(k.getFormSize(90,540))[0]+"; width: "+(k.getFormSize(120,540))[1];dC=c.ofArray([f.Attr().NewAttr("style",dB),f.Attr().NewAttr("src","yeahboy.png")]);return g.Tags().NewTag("img",dC);});dD=h.WithTextLabel(dx,dz);dE=h.WithLabelAbove(dD);return h.WithFormContainer(dE);},getFormSize:function(dF,dG){var dH,dI;dH=dF*k.screenHeight()/638>>0;dI=dG*k.screenWidth()/1366>>0;return[B(dH)+"px",B(dI)+"px"];},globalGraph:$.Field(function(){return{countOfVertex:0,edges:[]};}),globalTree:$.Field(function(){return null;}),screenHeight:$.Field(function(){return C("html").height();}),screenWidth:$.Field(function(){return C("html").width();}),setFormSize:function(dJ,dK,dL,dM){var dN;dN=function(dO){C(dO.Dom.querySelector(dL)).css("height",dJ).css("width",dK);return dO;};return b.MapElement(dN,dM);},style:$.Field(function(){return"padding-top: 0px; background-color: #FF69B4; border-width: 0px; border-color: #000000; border-radius: 10px; color: #000000; height: "+(k.getFormSize(40,150))[0]+"; width: "+(k.getFormSize(40,150))[1]+"; font-size:"+(k.getFormSize(15,15))[0];})}}}});$.OnInit(function(){a=$.Safe($$.WebSharper.Formlets);b=$.Safe(a.Formlet);c=$.Safe($$.WebSharper.List);d=$.Safe($$.WebSharper.Html);e=$.Safe(d.Client);f=$.Safe(e.Attr);g=$.Safe(e.Tags);h=$.Safe(a.Enhance);i=$.Safe($$.YC);j=$.Safe(i.GraphParsingDemo);k=$.Safe(j.Client);l=$.Safe($$.WebSharper.Control);m=$.Safe(l.FSharpEvent);n=$.Safe($$.FileReader);o=$.Safe($$.IntelliFactory);p=$.Safe(o.Formlets);q=$.Safe(p.Base);r=$.Safe(q.Result);s=$.Safe(e.EventsPervasives);t=$.Safe(a.Controls);u=$.Safe($$.WebSharper.Remoting);v=$.Safe(u.AjaxRemotingProvider);w=$.Safe(a.Data);x=$.Safe(h.FormButtonConfiguration);y=$.Safe($$.WebSharper.Operators);z=$.Safe($$.WebSharper.MatchFailureException);A=$.Safe($$.WebSharper.Unchecked);B=$.Safe($$.String);return C=$.Safe($$.jQuery);});$.OnLoad(function(){k.style();k.screenWidth();k.screenHeight();k.globalTree();k.globalGraph();k.RangeControl();k.MegaGigaForm();k.FileControl();return;});}());
