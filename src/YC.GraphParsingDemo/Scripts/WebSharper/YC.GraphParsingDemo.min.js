(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B;$.Define($$,{YC:{GraphParsingDemo:{Client:{ErrorControl:function(C){var D,E;D=b.Do();E=D.Delay(function(){var G,H,I,J;G=c.Input(C);H=f.getFormSize(20,50);I=H[0];J=H[1];return D.Bind(f.setFormSize(I,J,"output",G),function(K){return D.Return(K);});});return g.WithFormContainer(E);},FileControl:$.Field(function(){var L,Z;L=function(){var N,O,P,Q,W,X;N=i.New();O=j.ofArray([m.Attr().NewAttr("type","file"),m.Attr().NewAttr("accept","text/*")]);P=n.Tags().NewTag("input",O);Q=function(R){return function(){var T,U;T=R.Dom.files.item(0);U=new o();U.readAsText(T);return U.addEventListener("load",function(){return N.event.Trigger($.New(s,{$:0,$0:U.result}));},true);};};t.Events().OnChange(Q,P);W=P;X=function(){W.set_Value("");return N.event.Trigger($.New(s,{$:0,$0:""}));};return[W,X,N.event];};Z=b.BuildFormlet(L);return b.InitWith("",Z);}),InputControl:function(_0,_1){var _2,_3,bh,bi;_2=b.Do();_3=_2.Delay(function(){var _5,_6;_5=b.Do();_6=_5.Delay(function(){return _5.Bind(f.FileControl(),function(_8){return _5.Return(_8);});});return _2.Bind(g.WithFormContainer(_6),function(_9){var _,ba,bb,bc,bd,be,bf;_=_9===""?_1:_9;ba=c.TextArea(_);bb=g.WithTextLabel(_0,ba);bc=g.WithLabelAbove(bb);bd=f.getFormSize(90,540);be=bd[0];bf=bd[1];return _2.Bind(f.setFormSize(be,bf,"textarea",bc),function(bg){return _2.Return(bg);});});});bh=b.FlipBody(_3);bi=b.Vertical(bh);return g.WithFormContainer(bi);},Main:function(){var bi;bi=j.ofArray([f.MegaGigaForm().Run(function(){return null;})]);return n.Tags().NewTag("div",bi);},MegaGigaForm:$.Field(function(){var bk,bl,bs,bt,bu,bB,bC,bF,bG,bH,bI,bJ,bK,cy,cz;bk=b.Do();bl=bk.Delay(function(){return bk.Bind(f.InputControl("Graph",""),function(bn){var bo,bp,bq;bo=c.Checkbox(false);bp=g.WithTextLabel("Show formal subgraph",bo);bq=g.WithLabelLeft(bp);return bk.Bind(g.WithFormContainer(bq),function(br){return bk.Return([bn,br]);});});});bs=b.Vertical(bl);bt=b.Do();bu=bt.Delay(function(){return bt.Bind(f.InputControl("Grammar",""),function(bw){var bx,by,bz;bx=c.Checkbox(false);by=g.WithTextLabel("Remove redundant nodes",bx);bz=g.WithLabelLeft(by);return bt.Bind(g.WithFormContainer(bz),function(bA){return bt.Return([bw,bA]);});});});bB=b.Vertical(bu);bC=u.$(u.$(b.Return(function(bD){return function(bE){return[bD,bE];};}),bB),bs);bF=b.Horizontal(bC);bG=v.get_Default();bH=$.New(v,{Label:{$:1,$0:"SHOW GRAPH"},Style:{$:1,$0:f.style()},Class:bG.Class});bI=g.WithCustomSubmitButton(bH,bF);bJ=b.Vertical(bI);bK=function(bL){var bM,bN,bO,bP,bQ,bR,bS,bT,b4,b5,b6,b7,b_,b$,cc,cd,ce,cf,cg,ch,cl,cm,cn,cr,cs,ct,cu;bM=bL[0];bN=bL[1];bO=bM[0];bP=bM[1];bQ=bN[0];bR=bN[1];bS=b.Do();bT=bS.Delay(function(){var bV,bW,bX,b0,b1;bV=x.Sync("YC.GraphParsingDemo:1",[bQ,bO,bP,bR]);if(bV.$==4){bX=bV.$0;bW=bS.Bind(f.ShowGraphImageControl("Graph Visualization",{$:0},bX),function(bY){return bS.Bind(f.ShowSPPFImageControl("SPPF",{$:0},bX),function(bZ){return bS.Return([bY,bZ]);});});}else{if(bV.$==1){b0=bV.$0;b1=bV.$1;bW=bS.Bind(f.ShowGraphImageControl("Graph Visualization",{$:1,$0:b1},""),function(b2){return bS.Bind(f.ShowSPPFImageControl("SPPF",{$:1,$0:b0},""),function(b3){f.globalTree=function(){return b0;};f.globalGraph=function(){return b1;};return bS.Return([b2,b3]);});});}else{bW=y.Raise(z.New("C:\\YC.GraphParsingDemo\\src\\YC.GraphParsingDemo\\Client.fs",163,34));}}return bW;});b4=b.Horizontal(bT);b5=g.WithFormContainer(b4);b6=b.Do();b7=b6.Delay(function(){return b6.Bind(b5,function(b9){return b6.Return(b9);});});b_=b.Do();b$=b_.Delay(function(){return b_.Bind(f.RangeControl(),function(cb){return b_.Return(cb);});});cc=v.get_Default();cd=$.New(v,{Label:{$:1,$0:"FIND PATH"},Style:{$:1,$0:f.style()},Class:cc.Class});ce=g.WithCustomSubmitButton(cd,b$);cf=b.Horizontal(ce);cg=b.Do();ch=cg.Delay(function(){return cg.Bind(b7,function(cj){return cg.Bind(cf,function(ck){return cg.Return([cj,ck]);});});});cl=b.Vertical(ch);cm=b.Do();cn=cm.Delay(function(){return cm.Bind(f.ErrorControl("MegaError"),function(cp){return cm.Bind(f.ErrorControl("GigaError"),function(cq){return cm.Return([cp,cq]);});});});cr=b.Horizontal(cn);cs=g.WithFormContainer(cr);ct=b.Do();cu=ct.Delay(function(){return ct.Bind(cl,function(cw){return ct.Bind(cs,function(cx){return ct.Return([cw,cx]);});});});return b.Vertical(cu);};cy=b.Do();cz=cy.Delay(function(){return cy.Bind(bJ,function(cB){return cy.Bind(bK(cB),function(cC){return cy.Return([cB,cC]);});});});return b.Vertical(cz);}),RangeControl:$.Field(function(){var cD,cG,cO,cW,cX,cY;cG=b.Do();cO=b.Do();cD=u.$(u.$(b.Return(function(cE){return function(cF){return[cE<<0,cF<<0];};}),cG.Delay(function(){var cI,cJ,cK,cL,cM;cI=c.Input("");cJ=g.WithTextLabel("Initial",cI);cK=f.getFormSize(20,50);cL=cK[0];cM=cK[1];return cG.Bind(f.setFormSize(cL,cM,"input",cJ),function(cN){return cG.Return(cN);});})),cO.Delay(function(){var cQ,cR,cS,cT,cU;cQ=c.Input("");cR=g.WithTextLabel("Final",cQ);cS=f.getFormSize(20,50);cT=cS[0];cU=cS[1];return cO.Bind(f.setFormSize(cT,cU,"input",cR),function(cV){return cO.Return(cV);});}));cW=b.Horizontal(cD);cX=g.WithTextLabel("Vertices",cW);cY=g.WithLabelAbove(cX);return g.WithFormContainer(cY);}),ShowGraphImageControl:function(cZ,c0){var c2,c8,c9;c2=b.OfElement(function(){var c4,c5,c6,c7;c4="height: "+(f.getFormSize(90,540))[0]+"; width: "+(f.getFormSize(120,540))[1];if(c0.$==1){c0.$0;c6=j.ofArray([m.Attr().NewAttr("style",c4),m.Attr().NewAttr("src","yeahboy.png")]);c5=n.Tags().NewTag("img",c6);}else{c7=j.ofArray([m.Attr().NewAttr("style",c4),m.Attr().NewAttr("src","yeahboy.png")]);c5=n.Tags().NewTag("img",c7);}return c5;});c8=g.WithTextLabel(cZ,c2);c9=g.WithLabelAbove(c8);return g.WithFormContainer(c9);},ShowSPPFImageControl:function(c_,c$){var db,di,dj;db=b.OfElement(function(){var dd,de,df,dg,dh;dd="height: "+(f.getFormSize(90,540))[0]+"; width: "+(f.getFormSize(120,540))[1];if(c$.$==1){df=c$.$0;x.Sync("YC.GraphParsingDemo:3",[df]);dg=j.ofArray([m.Attr().NewAttr("style",dd),m.Attr().NewAttr("src","yeahboy.png")]);de=n.Tags().NewTag("img",dg);}else{dh=j.ofArray([m.Attr().NewAttr("style",dd),m.Attr().NewAttr("src","yeahboy.png")]);de=n.Tags().NewTag("img",dh);}return de;});di=g.WithTextLabel(c_,db);dj=g.WithLabelAbove(di);return g.WithFormContainer(dj);},getFormSize:function(dk,dl){var dm,dn;dm=dk*f.screenHeight()/638>>0;dn=dl*f.screenWidth()/1366>>0;return[A(dm)+"px",A(dn)+"px"];},globalGraph:$.Field(function(){return null;}),globalTree:$.Field(function(){return null;}),screenHeight:$.Field(function(){return B("html").height();}),screenWidth:$.Field(function(){return B("html").width();}),setFormSize:function(_do,dp,dq,dr){var ds;ds=function(dt){B(dt.Dom.querySelector(dq)).css("height",_do).css("width",dp);return dt;};return b.MapElement(ds,dr);},style:$.Field(function(){return"padding-top: 0px; background-color: #FF69B4; border-width: 0px; border-color: #000000; border-radius: 10px; color: #000000; height: "+(f.getFormSize(40,150))[0]+"; width: "+(f.getFormSize(40,150))[1]+"; font-size:"+(f.getFormSize(15,15))[0];})}}}});$.OnInit(function(){a=$.Safe($$.WebSharper.Formlets);b=$.Safe(a.Formlet);c=$.Safe(a.Controls);d=$.Safe($$.YC);e=$.Safe(d.GraphParsingDemo);f=$.Safe(e.Client);g=$.Safe(a.Enhance);h=$.Safe($$.WebSharper.Control);i=$.Safe(h.FSharpEvent);j=$.Safe($$.WebSharper.List);k=$.Safe($$.WebSharper.Html);l=$.Safe(k.Client);m=$.Safe(l.Attr);n=$.Safe(l.Tags);o=$.Safe($$.FileReader);p=$.Safe($$.IntelliFactory);q=$.Safe(p.Formlets);r=$.Safe(q.Base);s=$.Safe(r.Result);t=$.Safe(l.EventsPervasives);u=$.Safe(a.Data);v=$.Safe(g.FormButtonConfiguration);w=$.Safe($$.WebSharper.Remoting);x=$.Safe(w.AjaxRemotingProvider);y=$.Safe($$.WebSharper.Operators);z=$.Safe($$.WebSharper.MatchFailureException);A=$.Safe($$.String);return B=$.Safe($$.jQuery);});$.OnLoad(function(){f.style();f.screenWidth();f.screenHeight();f.globalTree();f.globalGraph();f.RangeControl();f.MegaGigaForm();f.FileControl();return;});}());
